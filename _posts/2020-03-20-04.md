---
layout: post
title: 난독화 기술 개발 1 - 다양한 난독화 기법에 대한 아이디어와 시도 (2)
date: 2020-03-20
Author: yarncha
categories:
tags: [난독화]
comments: true
---

이번 주에는 뭘 할거다.
지난 주 난독화 팀의 세미나를 진행하면서 앞으로의 개발 방향에 대한 이야기를 나눴다. 지난 주에 궁금했던 부분을 여쭤보았음
난독화 도구 개발에

Obfuscator 깃허브 레포 주소 : <>

앞으로는 위의 깃허브 레포에서 수정해서 다른 팀원들과 협업을 진행하도록 할 것이다.


키를 무작위로 생성하여 그 키에 맞게 여러가지 요법을 몇 번, 어디에 섞을 건지를 어던 규칙에 따라서 정해두기. 이렇게 하면 이 키를 가지고 역난독화 또한 가능할듯. 원래에 목적에 부합하게 됨
어떤 난독화 기술은 어디에서 쓰이는지 미리 자리를 잡아두고

그니까 prettyprinter같은걸 하나 생성함.(prettyprinter는 지워도 좋을듯) baseListener를 상속하여 obfuscation이 이루어지는 클래스를 하나 만들고, 여기에서 Obfuscation에서 작성한 난독화 기술들의 자리를 잡아두는 거임. 예를 들어 return stmt전용 난독화 기능이 있다 하면 exitStmt에서 뭐 어떻게 return만 잡아서 한다던지... 하는 식으로 미리 작성해 두고 프로그램 실행 시 무작위로 키가 발생하도록 함. 발생한 키는 이 프로그램으로 난독화를 수행할 때 필요함. 어떤 자리에 있는 어떤 코드가 제대로 작동하게(난독화하게) 하는거임. 이 때 각자의 기술들에 상호관계가 있다면, 예를 들어 어떤 난독화는 이 난독화와 실행하면 안 된다던가 그런거 고려해서 두 난독화가 동시에 수행되지 않게 해야겟지. 그리고 순서도 상관 있으니까 순서도 유의해서.. 예를 들어 ABC라는 키가 발생됏다. 하면 첫번째 A를 통해 A라는 난독화를 수행하고 다음에 B 다음에 C를 수행한 결과가 나오는거임. 이 키를 가지고 역난독화 도구를 돌리는 것은 간단하겠지. 사실 역난독화 도구라고 할 수 도 없을것 같은게 미리 어떻게 난독화를 진행했는지 알고 잇으니까 그냥 그 dump들을 지워주는 것에 그칠듯.



내가 생각한 난독화 기법
1. 글자 자료형을 이용해 장난치는거. string 0과 int를 이용해 int값을 string으로 변경해 이상한 글자로 바꿨다던가, 연산 결과를 int로 받아서 string으로 변경한 다음에 몇번째 글자에 이상한 글자를 넣고 가지고 다니다가 갑자기 그 이상한 글자를 빼고 결국 연산을 수행한다던가, 예상하지 못할 만한 방향으로 가기
2. 다른 팀원이 제안한 변수 변경에 응용할 만한 연산 헷갈리기 기법
IllIlIl이런 글자가 헷갈리는 것을 이용해 이 글자들로 연산을 수행하기. A에 값을 저장했다가 B를 가져와서 더했ㅈ다가 뺐다가 곱했다가 하는 방식으로 결국 뭐에서 뭐가 저장된건지 읽기 힘들게 만들음. 육안으로는 구분하기 힘들 것 같은데 사실 ㄱ컴퓨터 입장에서는 별거 없을 것 같음
3.
